/*

This CSS file will be included with your plugin, and
available in the app when your plugin is enabled.

If your plugin does not need CSS, delete this file.

*/

/* Strudel Container */
.strudel-container {
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	overflow: hidden;
}

/* Strudel Controls */
.strudel-controls {
	display: flex;
	align-items: center;
	gap: 1rem;
	padding: 0.25rem 0.5rem;
	background: var(--background-secondary);
	border-bottom: 1px solid var(--background-modifier-border);
	flex-wrap: wrap;
}

.strudel-play-button,
.strudel-update-button {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	padding: 0.375rem;
	border-radius: 4px;
	cursor: pointer;
	font-weight: 500;
	min-width: 24px;
	min-height: 24px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.strudel-update-button {
	background: var(--interactive-normal);
	color: var(--text-normal);
}

.strudel-play-button:hover,
.strudel-update-button:hover {
	background: var(--interactive-accent-hover);
}

.strudel-update-button:hover {
	background: var(--interactive-hover);
}

.strudel-play-button:disabled,
.strudel-update-button:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.strudel-status {
	display: flex;
	align-items: center;
	margin-left: auto;
}

.strudel-status-dot {
	width: 8px;
	height: 8px;
	border-radius: 50%;
	transition: background-color 0.2s ease;
}

.strudel-status-dot.ready {
	background-color: var(--color-green);
}

.strudel-status-dot.loading {
	background-color: var(--color-yellow);
	animation: pulse 1.5s ease-in-out infinite;
}

.strudel-status-dot.playing {
	background-color: var(--color-blue);
	animation: pulse 1s ease-in-out infinite;
}

.strudel-status-dot.error {
	background-color: var(--color-red);
}

/* Pulse animation for loading and playing states */
@keyframes pulse {
	0%,
	100% {
		opacity: 1;
	}
	50% {
		opacity: 0.5;
	}
}

/* Spinning animation for loading and playing states */
.spinning {
	animation: spin 1s linear infinite;
}

@keyframes spin {
	0% {
		transform: rotate(0deg);
	}
	100% {
		transform: rotate(360deg);
	}
}

.strudel-tempo {
	display: flex;
	align-items: center;
	gap: 0.5rem;
	font-size: 0.9em;
}

.strudel-tempo-slider {
	width: 120px;
}

.strudel-tempo-value {
	min-width: 2em;
	font-weight: 500;
	color: var(--text-accent);
}

/* Strudel Editor */
.strudel-editor {
	/* min-height: 100px; */
	/* background: var(--background-primary); */
}

.strudel-editor .cm-editor {
	/* border: none !important; */
	/* outline: none !important; */
}

.strudel-editor .cm-scroller {
	padding: 1rem;
}

.strudel-editor .cm-focused {
	/* outline: none !important; */
}

/* Ensure cursor is visible */
.strudel-editor .cm-cursor {
	border-left: 2px solid var(--text-normal) !important;
	margin-left: 0 !important;
	opacity: 1 !important;
	animation: blink 1s step-end infinite !important;
}

.strudel-editor .cm-focused .cm-cursor {
	border-left: 2px solid var(--interactive-accent) !important;
}

.strudel-editor .cm-editor.cm-focused .cm-cursor {
	border-left: 2px solid var(--interactive-accent) !important;
}

/* Cursor blinking animation */
@keyframes blink {
	0%,
	50% {
		opacity: 1;
	}
	51%,
	100% {
		opacity: 0;
	}
}

/* Dark theme adjustments */
.theme-dark .strudel-container {
	border-color: var(--background-modifier-border);
}

.theme-dark .strudel-controls {
	background: var(--background-secondary-alt);
}

/* Mobile responsiveness */
@media (max-width: 768px) {
	.strudel-controls {
		flex-direction: column;
		align-items: stretch;
		gap: 0.5rem;
	}

	.strudel-tempo {
		justify-content: space-between;
	}

	.strudel-tempo-slider {
		flex: 1;
		margin: 0 0.5rem;
	}

	.strudel-status {
		margin-left: 0;
		margin-top: 0.5rem;
	}
}
